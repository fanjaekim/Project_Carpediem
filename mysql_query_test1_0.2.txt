--Log--

create table Account(
ID varchar(15) not null,
Password varchar(150) not null,
Primary Key(ID)
);

Insert into Account(ID, Password) values ('carpediem', 'carpedm');

--------

create table Hierarchy_Dictionary(
Ranking int not null,
Hierarchy varchar(20) not null,
Primary key(Ranking)
);

Insert into Hierarchy_Dictionary(Ranking, Hierarchy)
values (1, 'Carpediem');
Insert into Hierarchy_Dictionary(Ranking, Hierarchy)
values (2, '기사단장');
Insert into Hierarchy_Dictionary(Ranking, Hierarchy)
values (3, '정식기사');
Insert into Hierarchy_Dictionary(Ranking, Hierarchy)
values (4, '견습기사');
Insert into Hierarchy_Dictionary(Ranking, Hierarchy)
values (5, 'Nobless');

create table Guild_List(
Ranking int not null,
Name varchar(20) not null,
Primary Key(Name)
);

Insert into Guild_List(Position, Name)
values (2, '오렌쥐당');
Insert into Guild_List(Position, Name)
values (1, 'gL창');
Insert into Guild_List(Position, Name)
values (2, '샹이에오');
Insert into Guild_List(Position, Name)
values (2, '남선영');
Insert into Guild_List(Position, Name)
values (5, '불닭프레이');
Insert into Guild_List(Position, Name)
values (5, '그냥여백');
Insert into Guild_List(Position, Name)
values (5, '그냥태양임');

create table Tag_List(
Name varchar(20) not null,
Tag varchar(20) not null,
Primary Key(Name),
Foreign Key(Tag) References Tag_List(Name)
);


create table Management_List(
Name varchar(20) not null,
Life int not null default '0',
Ranking int not null,
Primary Key(Name),
Foreign Key(Name) References Guild_List(Name),
Foreign Key(Ranking) References Hierarchy_Dictionary(Ranking)
);

create table Result_List(
Name varchar(20) not null,
Hierarchy varchar(20) not null,
Primary Key(Name),
Foreign Key(Name) References Management_List(Name)
);


-------------- Procedure ---------------
Drop Procedure IF Exists update_tag_list;

DELIMITER $$
Create Procedure update_tag_list()
BEGIN
Insert IGNORE into Tag_List (Name, Tag)
Select Name, Name From Guild_List;
END $$
DELIMITER ;

-------------- Event ---------------
Create
event evt_tag
on schedule every 1 day
starts '2021-02-26 15:31:00'
Do
Call update_tag_list();

삭제법
Drop Event evt_tag;

테이블 비우기
delete from account;
delete from result_list;
delete from tag_list;
delete from management_list;
delete from guild_list;
delete from hierarchy_dictionary;

테이블 삭제 순서
drop table account;
drop table result_list;
drop table tag_list;
drop table management_list;
drop table guild_list;
drop table hierarchy_dictionary;